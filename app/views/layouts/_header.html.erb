<!-- Sidebar -->
<div class="sidebar d-flex flex-column">
  <h3 class="fw-bold text-primary sidebar-title">
    My <span class="text-danger">Book</span><br />
    <span class="text-danger shelf-text">Shelf</span>
  </h3>

  <% if logged_in? %>
    <% if admin_user? %>
      <nav class="nav flex-column">
        <div class="nav-item"><%= link_to "üìä #{t('sidebar.dashboard')}", "#", class: "nav-link" %></div>
        <div class="nav-item"><%= link_to "üë• #{t('sidebar.users')}", "#", class: "nav-link" %></div>
        <div class="nav-item"><%= link_to "üì• #{t('sidebar.borrow_requests')}", "#", class: "nav-link" %></div>
        <div class="nav-item"><%= link_to "üìö #{t('sidebar.books')}", admin_books_path, class: "nav-link #{'active' if current_page?(admin_books_path)}" %></div>
        <div class="nav-item"><%= link_to "‚úçÔ∏è #{t('sidebar.authors')}", "#", class: "nav-link" %></div>
        <div class="nav-item"><%= link_to "üóÇ #{t('sidebar.categories')}", "#", class: "nav-link" %></div>
        <div class="nav-item"><%= link_to "üè¢ #{t('sidebar.publishers')}", "#", class: "nav-link" %></div>
      </nav>
    <% else %>
      <nav class="nav flex-column">
        <div class="nav-item"><%= link_to "üè† #{t('sidebar.home')}", root_path, class: "nav-link #{'active' if current_page?(root_path)}" %></div>
        <div class="nav-item"><%= link_to "üîç #{t('sidebar.search')}", "#", class: "nav-link" %></div>
        <div class="nav-item"><%= link_to "‚≠ê #{t('sidebar.favorite')}", "#", class: "nav-link" %></div>
        <div class="nav-item"><%= link_to "üë§ #{t('sidebar.follow')}", "#", class: "nav-link" %></div>
        <div class="nav-item"><%= link_to "üìö #{t('sidebar.borrow_list')}", "#", class: "nav-link" %></div>
      </nav>
    <% end %>
  <% else %>
    <nav class="nav flex-column">
      <div class="nav-item"><%= link_to "üè† #{t('sidebar.home')}", root_path, class: "nav-link #{'active' if current_page?(root_path)}" %></div>
      <div class="nav-item"><%= link_to "üîç #{t('sidebar.search')}", "#", class: "nav-link" %></div>
    </nav>
  <% end %>
</div>

<!-- Topbar -->
<div class="topbar d-flex align-items-center justify-content-between px-6 py-2 bg-light shadow-sm">
  <% if logged_in? %>
    <div class="left-content">
      <span class="fw-bold fs-5">
        <%= gravatar_for current_user, size: 30 if current_user %>
        <%= current_user&.name %>
      </span>
    </div>

    <div class="right-buttons d-flex align-items-center gap-4">
      <!-- Gi·ªù v√† ng√†y -->
      <div class="text-muted small text-end" id="current-time">
        <div class="fw-bold fs-3" id="current-hour">--:--</div>
        <div class="fs-6" id="current-date">--/--/----</div>
      </div>

      <!-- Dropdown ‚öôÔ∏è -->
      <div class="dropdown">
        <button class="btn text-dark fs-4 dropdown-toggle" type="button" id="settingsDropdown" data-toggle="dropdown">
          ‚öôÔ∏è
        </button>
        <ul class="dropdown-menu">
          <li><%= link_to t("topbar.profile"), current_user %></li>
          <li><%= link_to t("topbar.settings"), "#"%></li>
          <li><hr class="dropdown-divider"></li>
          <li><%= link_to t("topbar.log_out"), logout_path, data: { "turbo-method": :delete }%></li>
        </ul>
      </div>
    </div>
  <% else %>
    <div class="left-content">
      <span class="fw-bold fs-5">üë§ <%= t("topbar.guest") %></span>
    </div>

    <div class="right-buttons">
      <%= link_to t("topbar.sign_in"), login_path, class: "btn btn-dark rounded-pill px-5 py-2 me-5 fs-6" %>
      <%= link_to t("topbar.sign_up"), signup_path, class: "btn btn-dark rounded-pill px-5 py-2 fs-6" %>
    </div>
  <% end %>
</div>

<!-- Language Switcher -->
<div class="dropdown locale-switcher">
  <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="localeDropdown" data-toggle="dropdown">
    üåê <%= t("language") %>
  </button>
  <ul class="dropdown-menu">
    <li><%= link_to t("languages.en"), request.params.merge(locale: :en)%></li>
    <li><%= link_to t("languages.vi"), request.params.merge(locale: :vi)%></li>
  </ul>
</div>
